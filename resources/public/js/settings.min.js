m2d2.load((t=>{t.dict.set({yes:{en:"YES"},no:{en:"NO"},ok:{en:"OK"},send:{en:"SEND"},cancel:{en:"CANCEL"}})})),m2d2.ready((t=>{var e=!1,i=!1,o="center",s="",a="",n=[];t("#mainSettings",{onload:function(e){t.get("/getthemes",(t=>{t.ok&&(X.items.clear(),t.data.forEach((t=>{X.items.push({dataset:{id:t.id},text:t.themeName})})))}),!0),t.get("/getbooks",(t=>{t.ok&&(et.items.clear(),Object.entries(t.data).forEach((([t,e])=>{et.items.push({text:`${t} : ${e}`})})))}),(t=>{console.error("Error getting books",t)}),!0),t.get("/getversions",(t=>{t.ok&&(it.items.clear(),nt.items.clear(),lt.items.clear(),ct.items.clear(),Object.entries(t.data).forEach((([t,e])=>{it.items.push({text:`${t} : ${e}`}),nt.items.push({text:`${t} : ${e}`}),lt.items.push({text:`${t} : ${e}`}),ct.items.push({text:`${t} : ${e}`})})))}),(t=>{console.error("Error getting installed books",t)}),!0);dt({theme:"Default"})}});const l=t("#selectFont",{template:{font:{tagName:"option",id:"font"}},items:[],onchange:function(t){r.style.fontFamily=l.value}}),c=t("#inputFontSize",{onload:function(t){this.value=24},onchange:function(t){var e=1;this.value<=0?this.value=1:(e=t.target.value,r.style.fontSize=e+"px",H.style.fontSize=e+"px")}});t("body",{onload:function(e){t.get("/getfonts",(t=>{if(t.ok){var e="";l.items.clear(),t.data.forEach((t=>{("Arial"===t||"Ubuntu"===t||"San Francisco"===t)&&(e=t),l.items.push({text:t})})),l.items.length>0&&(l.value=e)}}),!0)}});const r=t("#taFontPreview",{onchange:function(t){H.innerHTML=this.value.replace(/\n/g,"<br>")}}),f=t("#settingFont",{show:!0,onshow:function(t){h.show=!1,m.show=!1,v.show=!1}}),h=t("#settingLocation",{show:!1,onshow:function(t){f.show=!1,m.show=!1,v.show=!1;window.location.hostname,window.location.protocol}}),m=t("#settingThemeList",{show:!1,onshow:function(t){f.show=!1,h.show=!1,v.show=!1}}),v=t("#settingBible",{show:!1,onshow:function(t){f.show=!1,h.show=!1,m.show=!1}}),d=t("#navFontSettings",{onload:function(t){this.classList.add("active")},onclick:function(t){f.show=!0,this.classList.add("active"),g.classList.remove("active"),u.classList.remove("active"),p.classList.remove("active")}}),g=t("#navLocationSettings",{onclick:function(t){h.show=!0,this.classList.add("active"),d.classList.remove("active"),u.classList.remove("active"),p.classList.remove("active")}}),u=t("#navThemeList",{onclick:function(t){m.show=!0,this.classList.add("active"),d.classList.remove("active"),g.classList.remove("active"),p.classList.remove("active")}}),p=t("#navBibleSettings",{onclick:function(t){v.show=!0,this.classList.add("active"),d.classList.remove("active"),g.classList.remove("active"),u.classList.remove("active")}}),y=t("#fontBold",{onclick:function(t){this.classList.toggle("active"),this.classList.contains("active")?(r.style.fontWeight="bold",H.style.fontWeight="bold",e=!0):(r.style.fontWeight="",H.style.fontWeight="",e=!1)}}),b=t("#fontItalic",{onclick:function(t){this.classList.toggle("active"),this.classList.contains("active")?(r.style.fontStyle="italic",H.style.fontStyle="italic",i=!0):(r.style.fontStyle="",H.style.fontStyle="",i=!1)}}),L=t("#fontStrikeThrough",{onclick:function(t){this.classList.toggle("active"),this.classList.contains("active")?(r.style.textDecoration="line-through",H.style.textDecoration="line-through",!0):(r.style.textDecoration="",H.style.textDecoration="",!1)}}),k=t("#inputThemeName"),x=t("#colorPicker",{onchange:function(t){const e=t.target.value;r.style.color=e,H.style.color=e,r.style.backgroundColor="#ffffff"===e||"white"===e?"black":""}}),w=(t("#buttonSaveTheme",{onclick:function(n){if(""===k.value)t.failure("Please type-in a theme's name");else{const n=X.options[X.selectedIndex].dataset.id;console.log("the id is",n);const r={id:n,themeName:k.value,font:l.value,fontSize:c.value,fontColor:x.value,bold:e,italic:i,strikeThrough:i,topLeftOffset:w.value,topMiddleOffset:O.value,topRightOffset:S.value,leftUpperOffset:A.value,rightUpperOffset:T.value,leftMiddleOffset:B.value,rightMiddleOffset:_.value,leftLowerOffset:E.value,rightLowerOffset:R.value,leftBottomOffset:j.value,middleBottomOffset:C.value,rightBottomOffset:M.value,textAlign:o,justifyContent:s,alignItems:a};t.put("/savetheme",r,(e=>{e.ok?t.success("Theme saved."):t.failure("An error occurred!")}),(e=>{t.failure("An error occurred!",e)}),!0)}}}),t("#topLeftOffset",{disabled:!0,onchange:function(t){var e=t.target.value;e<=0&&(e=0,this.value=e),H.style.marginTop=e+"px"}})),O=t("#topMiddleOffset",{disabled:!0,onchange:function(t){var e=t.target.value;e<=0&&(e=0,this.value=e),H.style.marginTop=e+"px"}}),S=t("#topRightOffset",{disabled:!0,onchange:function(t){var e=t.target.value;e<=0&&(e=0,this.value=e),H.style.marginTop=e+"px"}}),A=t("#leftUpperOffset",{disabled:!0,onchange:function(t){var e=t.target.value;e<=0&&(e=0,this.value=e),H.style.marginLeft=e+"px"}}),T=t("#rightUpperOffset",{disabled:!0,onchange:function(t){var e=t.target.value;e<=0&&(e=0,this.value=e),H.style.marginRight=e+"px"}}),B=t("#leftMiddleOffset",{disabled:!0,onchange:function(t){var e=t.target.value;e<=0&&(e=0,this.value=e),H.style.marginLeft=e+"px"}}),_=t("#rightMiddleOffset",{disabled:!0,onchange:function(t){var e=t.target.value;e<=0&&(e=0,this.value=e),H.style.marginRight=e+"px"}}),E=t("#leftLowerOffset",{disabled:!0,onchange:function(t){var e=t.target.value;e<=0&&(e=0,this.value=e),H.style.marginLeft=e+"px"}}),R=t("#rightLowerOffset",{disabled:!0,onchange:function(t){var e=t.target.value;e<=0&&(e=0,this.value=e),H.style.marginRight=e+"px"}}),j=t("#leftBottomOffset",{disabled:!0,onchange:function(t){var e=t.target.value;e<=0&&(e=0,this.value=e),H.style.marginBottom=e+"px"}}),C=t("#middleBottomOffset",{disabled:!0,onchange:function(t){var e=t.target.value;e<=0&&(e=0,this.value=e),H.style.marginBottom=e+"px"}}),M=t("#rightBottomOffset",{disabled:!0,onchange:function(t){var e=t.target.value;e<=0&&(e=0,this.value=e),H.style.marginBottom=e+"px"}}),N=t("#previewContainer"),F=t("#radioTopLeft",{onclick:function(t){vt("flex-start","flex-start"),ht(),mt(!1,!0,!0,!1,!0,!0,!0,!0,!0,!0,!0,!0)}}),I=t("#radioTopMiddle",{onclick:function(t){vt("center","flex-start"),ht(),mt(!0,!1,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0)}}),D=t("#radioTopRight",{onclick:function(t){vt("flex-end","flex-start"),ht(),mt(!0,!0,!1,!0,!1,!0,!0,!0,!0,!0,!0,!0)}}),P=t("#radioLefMiddle",{onclick:function(t){vt("flex-start","center"),ht(),mt(!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0)}}),U=t("#radioCenter",{onload:function(t){vt("center","center"),mt(!0,!1,!0,!0,!0,!1,!1,!0,!0,!0,!1,!0)},onclick:function(t){vt("center","center"),ht(),mt(!0,!1,!0,!0,!0,!1,!1,!0,!0,!0,!1,!0)}}),$=t("#radioRightMiddle",{onclick:function(t){vt("flex-end","center"),ht(),mt(!0,!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0)}}),V=t("#radioLeftBottom",{onclick:function(t){vt("flex-start","end"),ht(),mt(!0,!0,!0,!0,!0,!0,!0,!1,!0,!1,!0,!0)}}),W=t("#radioMiddleBottom",{onclick:function(t){vt("center","end"),ht(),mt(!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!1,!0)}}),z=t("#radioRightBottom",{onclick:function(t){vt("flex-end","end"),ht(),mt(!0,!0,!0,!0,!0,!0,!0,!0,!1,!0,!0,!1)}}),H=t("#previewText",{onload:function(t){this.text=r.value}});document.querySelectorAll('input[type="radio"]').forEach((t=>{t.addEventListener("click",(t=>{document.querySelectorAll('input[type="radio"]').forEach((e=>{e!==t.target&&(e.checked=!1)}))}))}));t("#buttonResetOffset",{onclick:function(t){H.style.margin="0",ht()}});const q=t("#fontAlignCenter",{onload:function(t){this.classList.add("active"),H.style.textAlign="center"},onclick:function(t){H.style.textAlign="center",this.classList.add("active"),J.classList.remove("active"),Y.classList.remove("active"),K.classList.remove("active"),G.classList.remove("active"),Q.classList.remove("active"),o="center"}}),J=t("#fontAlignHorRight",{onclick:function(t){H.style.textAlign="end",q.classList.remove("active"),this.classList.add("active"),Y.classList.remove("active"),K.classList.remove("active"),G.classList.remove("active"),Q.classList.remove("active"),o="end"}}),Y=t("#fontAlignJustify",{onclick:function(t){H.style.textAlign="justify",q.classList.remove("active"),J.classList.remove("active"),this.classList.add("active"),K.classList.remove("active"),G.classList.remove("active"),Q.classList.remove("active"),o="justify"}}),K=t("#fontAlignHorLeft",{onclick:function(t){H.style.textAlign="start",q.classList.remove("active"),J.classList.remove("active"),Y.classList.remove("active"),this.classList.add("active"),G.classList.remove("active"),Q.classList.remove("active"),o="start"}}),G=t("#fontAlignRight",{onclick:function(t){H.style.textAlign="right",q.classList.remove("active"),J.classList.remove("active"),Y.classList.remove("active"),K.classList.remove("active"),this.classList.add("active"),Q.classList.remove("active"),o="right"}}),Q=t("#fontAlignLeft",{onclick:function(t){H.style.textAlign="left",q.classList.remove("active"),J.classList.remove("active"),Y.classList.remove("active"),K.classList.remove("active"),G.classList.remove("active"),this.classList.add("active"),o="left"}}),X=t("#themeList",{template:{optionTheme:{tagName:"option",id:"optionTheme"}},items:[],onchange:function(t){dt({theme:t.target.value})}}),Z=(t("#buttonOpenFile",{onclick:function(t){}}),t("#mediaLink")),tt=(t("#buttonSetPlay",{onclick:function(e){""===Z.value&&t.failure("You did not provide a proper link.")}}),t("#buttonSetTheme",{onclick:function(e){const i=X.value;if(""===i)t.failure("Please choose a theme");else{const e={theme:i};t.post("/settheme",e,(e=>{e.ok?t.success("Theme set."):t.failure("Error setting theme.")}),!0)}}}),t("#inputVerseSearch",{onkeydown:function(t){"Enter"===t.key&&(n=[],!0===ot.show&&n.push(nt.value.split(":")[0].trim()),!0===st.show&&n.push(lt.value.split(":")[0].trim()),!0===at.show&&n.push(ct.value.split(":")[0].trim()),ft(this.value,n))}})),et=t("#bibleVersions",{template:{option:{tagName:"option",style:{borderBottom:"1px solid black"}}},items:[]}),it=t("#versionsInstalled",{template:{option:{tagName:"option",style:{borderBottom:"1px solid black"}}},items:[]}),ot=t("#version1"),st=t("#version2",{show:!1}),at=t("#version3",{show:!1}),nt=t("#selectVersion1",{template:{option:{tagName:"option",style:{borderBottom:"1px solid black"}}},items:[]}),lt=t("#selectVersion2",{template:{option:{tagName:"option",style:{borderBottom:"1px solid black"}}},items:[]}),ct=t("#selectVersion3",{template:{option:{tagName:"option",style:{borderBottom:"1px solid black"}}},items:[]}),rt=(t("#selectVersionsToProject",{onload:function(t){"1"===t.target.value&&(ot.enabled=!0,st.enabled=!1,at.enabled=!1)},onchange:function(t){"1"===t.target.value?(ot.show=!0,st.show=!1,at.show=!1):"2"===t.target.value?(ot.show=!0,st.show=!0,at.show=!1):"3"===t.target.value&&(ot.show=!0,st.show=!0,at.show=!0)}}),t("#buttonInstall",{onclick:function(e){const i=et.value;""===i?t.failure("I didn't get that. Empty!"):t.confirm("Please confirm Bible version installation.",(e=>{if(e){const e={initials:i.split(":")[0].trim()};t.post("/installbook",e,(e=>{e.ok&&t.success("Installation is still in progress. Please refresh after 5 minutes.")}),(t=>{console.error("Error installing book",t)}),!0)}}))}}),t("#buttonUninstall",{onclick:function(e){const i=it.value;""===i?t.failure("I did not get that. Empty!"):t.confirm("Please confirm on uninstalling version?",(e=>{if(e){const e={initials:i.split(":")[0].trim()};t.delete("/uninstallbook",e,(e=>{e.ok&&t.success("Uninstall is still in progress. Please refresh after 5 minutes.")}),(t=>{console.error("Error uninstalling book",t)}),!0)}}))}}),t("#buttonSearch",{onclick:function(t){n=[],!0===ot.show&&n.push(nt.value.split(":")[0].trim()),!0===st.show&&n.push(lt.value.split(":")[0].trim()),!0===at.show&&n.push(ct.value.split(":")[0].trim()),ft(tt.value,n)}}),t("#verseList",{template:{li:{tagName:"li",style:{border:"1px solid white",whiteSpace:"normal",cursor:"pointer"},preVerse:{tagName:"pre",css:"preVerse",style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},onclick:function(e){document.querySelectorAll("ul#verseList pre").forEach((t=>{t.style.backgroundColor="",t.style.color=""})),e.target.style.backgroundColor="lightgreen",e.target.style.color="black",n=[],!0===ot.show&&n.push(nt.value.split(":")[0].trim()),!0===st.show&&n.push(lt.value.split(":")[0].trim()),!0===at.show&&n.push(ct.value.split(":")[0].trim());const i={verse:this.textContent,versions:n};t.post("/projectverse",i,(t=>{t.ok&&console.debug("Success projecting verse")}),(t=>{console.error("Error projecting verse.",t)}),!0)}}}},items:[]}));function ft(e,i){const o={verse:e,versions:i};t.post("/searchbibleverse",o,(t=>{if(t.ok){const i=t.data;i.length>1&&"\n\n",rt.items.clear();const o=i.length,s=Object.keys(i[0]).length;for(let t=0;t<s;t++){var e="";for(let s=0;s<o;s++){e=Object.keys(i[s])[t]}rt.items.push({preVerse:{textContent:e}})}}}),(t=>{console.error("Error search verse:",t)}),!0)}function ht(){w.value=0,O.value=0,S.value=0,A.value=0,T.value=0,B.value=0,_.value=0,E.value=0,R.value=0,j.value=0,C.value=0,M.value=0}function mt(t,e,i,o,s,a,n,l,c,r,f,h){w.disabled=t,O.disabled=e,S.disabled=i,A.disabled=o,T.disabled=s,B.disabled=a,_.disabled=n,E.disabled=l,R.disabled=c,j.disabled=r,C.disabled=f,M.disabled=h}function vt(t,e){N.style.justifyContent=t,N.style.alignItems=e,s=t,a=e,console.log("justify content is ",t),console.log("align items is ",e)}function dt(o){t.post("/gettheme",o,(t=>{if(t.ok){const a=t.data.font,n=t.data.font_size,f=t.data.font_color,h=t.data.bold,m=t.data.italic,v=t.data.strike_through,d=t.data.top_left_offset,g=t.data.top_middle_offset,u=t.data.top_right_offset,p=t.data.left_upper_offset,k=t.data.right_upper_offset,N=t.data.left_middle_offset,X=t.data.right_middle_offset,Z=t.data.left_lower_offset,tt=t.data.right_lower_offset,et=t.data.left_bottom_offset,it=t.data.middle_bottom_offset,ot=t.data.right_bottom_offset,st=t.data.text_align,at=t.data.justify_content,nt=t.data.align_items;w.value=d,A.value=p,O.value=g,S.value=u,T.value=k,B.value=N,_.value=X,E.value=Z,j.value=et,C.value=it,R.value=tt,M.value=ot;const lt=d+g+u,ct=et+it+ot,rt=p+N+Z,ft=k+X+tt;switch(H.style.marginTop=lt+"px",H.style.marginBottom=ct+"px",H.style.marginLeft=rt+"px",H.style.marginRight=ft+"px",l.value=a,H.style.fontFamily=a,c.value=n,H.style.fontSize=n,x.value=f,H.style.color=f,r.style.color=f,"#ffffff"===f||"white"===color?r.style.backgroundColor="black":r.style.backgroundColor="",h?(y.classList.toggle("active"),H.style.fontWeight="bold",r.style.fontWeight="bold",e=!0):(y.classList.remove("active"),H.style.fontWeight="",r.style.fontWeight=""),m?(b.classList.toggle("active"),H.style.fontStyle="italic",r.style.fontStyle="italic",i=!0):(b.classList.remove("active"),H.style.fontStyle="",r.style.fontStyle=""),v?(L.classList.toggle("active"),H.style.textDecoration="line-through",r.style.textDecoration="line-through",!0):(L.classList.remove("active"),H.style.textDecoration="",r.style.textDecoration=""),st){case"center":q.classList.add("active"),H.style.textAlign="center";break;case"end":J.classList.add("active"),H.style.textAlign="end";break;case"justify":Y.classList.add("active"),H.style.textAlign="justify";break;case"start":K.classList.add("active"),H.style.textAlign="start";break;case"right":G.classList.add("active"),H.style.textAlign="right";break;case"left":Q.classList.add("active"),H.style.textAlign="left";break;default:H.style.textAlign="center",console.error("Unknown text alignment")}vt(at,nt),s=nt,"flex-start"===(o=at)&&"flex-start"===s?(F.checked=!0,mt(!1,!0,!0,!1,!0,!0,!0,!0,!0,!0,!0,!0)):"center"===o&&"flex-start"===s?(I.checked=!0,mt(!0,!1,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0)):"flex-end"===o&&"flex-start"===s?(D.checked=!0,mt(!0,!0,!1,!0,!1,!0,!0,!0,!0,!0,!0,!0)):"flex-start"===o&&"center"===s?(P.checked=!0,mt(!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0)):"center"===o&&"center"===s?(U.checked=!0,mt(!0,!1,!0,!0,!0,!1,!1,!0,!0,!0,!1,!0)):"flex-end"===o&&"center"===s?($.checked=!0,mt(!0,!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0)):"flex-start"===o&&"end"===s?(V.checked=!0,mt(!0,!0,!0,!0,!0,!0,!0,!1,!0,!1,!0,!0)):"center"===o&&"end"===s?(W.checked=!0,mt(!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!1,!0)):"flex-end"===o&&"end"===s&&(z.checked=!0,mt(!0,!0,!0,!0,!0,!0,!0,!0,!1,!0,!0,!1))}var o,s}),!0)}tippy("#navFontSettings",{content:"Font settings (Font style and size)",interactive:!0,placement:"right",animation:"scale",theme:"light"}),tippy("#navLocationSettings",{content:"Setting for the location of text on the screen",interactive:!0,placement:"right",animation:"scale",theme:"light"}),tippy("#navThemeList",{content:"List of themes",interactive:!0,placement:"right",animation:"scale",theme:"light"}),tippy("#navBibleSettings",{content:"Manage Bible versions",interactive:!0,placement:"right",animation:"scale",theme:"light"}),tippy("#fontBold",{content:"Bold",interactive:!0,placement:"bottom",animation:"scale",theme:"light"}),tippy("#fontItalic",{content:"Italic",interactive:!0,placement:"bottom",animation:"scale",theme:"light"}),tippy("#fontStrikeThrough",{content:"Strike through",interactive:!0,placement:"bottom",animation:"scale",theme:"light"}),tippy("#topLeftOffset",{content:"Top-left offset",interactive:!1,placement:"top",animation:"scale",theme:"light"}),tippy("#topMiddleOffset",{content:"Top-middle offset",interactive:!1,placement:"top",animation:"scale",theme:"light"}),tippy("#topRightOffset",{content:"Top-right offset",interactive:!1,placement:"top",animation:"scale",theme:"light"}),tippy("#leftUpperOffset",{content:"Left-upper offset",interactive:!1,placement:"right",animation:"scale",theme:"light"}),tippy("#rightUpperOffset",{content:"Right-upper offset",interactive:!1,placement:"right",animation:"scale",theme:"light"}),tippy("#leftMiddleOffset",{content:"Left-middle offset",interactive:!1,placement:"right",animation:"scale",theme:"light"}),tippy("#rightMiddleOffset",{content:"Right-middle offset",interactive:!1,placement:"right",animation:"scale",theme:"light"}),tippy("#leftLowerOffset",{content:"Bottom-lower offset",interactive:!1,placement:"right",animation:"scale",theme:"light"}),tippy("#rightLowerOffset",{content:"Right-lower offset",interactive:!1,placement:"right",animation:"scale",theme:"light"}),tippy("#leftBottomOffset",{content:"Left-bottom offset",interactive:!1,placement:"bottom",animation:"scale",theme:"light"}),tippy("#middleBottomOffset",{content:"Middle-bottom offset",interactive:!1,placement:"bottom",animation:"scale",theme:"light"}),tippy("#rightBottomOffset",{content:"Right-bottom offset",interactive:!1,placement:"bottom",animation:"scale",theme:"light"}),tippy("#fontAlignCenter",{content:"Text align center",interactive:!1,placement:"bottom",animation:"scale",theme:"light"}),tippy("#fontAlignHorRight",{content:"Text align end",interactive:!1,placement:"bottom",animation:"scale",theme:"light"}),tippy("#fontAlignJustify",{content:"Text align justify",interactive:!1,placement:"bottom",animation:"scale",theme:"light"}),tippy("#fontAlignHorLeft",{content:"Text align start",interactive:!1,placement:"bottom",animation:"scale",theme:"light"}),tippy("#fontAlignRight",{content:"Text align right",interactive:!1,placement:"bottom",animation:"scale",theme:"light"}),tippy("#fontAlignLeft",{content:"Text align left",interactive:!1,placement:"bottom",animation:"scale",theme:"light"})}));