m2d2.load((e=>{e.dict.set({yes:{en:"YES"},no:{en:"NO"},ok:{en:"OK"},send:{en:"SEND"},cancel:{en:"CANCEL"}})})),m2d2.ready((e=>{const t=e("#splashScreen"),n=e("#main"),o=e("#lyrics"),s=e("#mediaContainer"),i=e("#info",{show:!1}),l=new EventSource("/events");e("body",{onload:function(e){setTimeout((function(){t.style.display="none",n.style.display="flex",i.show=!0,r("assets/tiny.mp4")}),3e3)}});function r(e){s.innerHTML="";const t=e.startsWith("http://")||e.startsWith("https://")||e.startsWith("www.");if(e.endsWith(".mp4")||e.endsWith(".webm")||e.endsWith(".ogg")||t&&(e.includes(".mp4")||e.includes(".webm")||e.includes(".ogg"))){let n="";e.endsWith(".mp4")||t&&e.includes(".mp4")?n="video/mp4":e.endsWith(".webm")||t&&e.includes(".webm")?n="video/webm":(e.endsWith(".ogg")||t&&e.includes(".ogg"))&&(n="video/ogg"),s.innerHTML=`\n                <video id="player" style="object-fit: cover;" autoplay muted loop>\n                    <source src="${e}" type="${n}" />\n                    Your browser does not support the video tag.\n                </video>\n            `;new Plyr("#player")}else e.endsWith(".jpeg")||e.endsWith(".jpg")||e.endsWith(".png")||t&&(e.includes(".jpeg")||e.includes(".jpg")||e.includes(".png"))?s.innerHTML=`<img id="imgContainer" style="object-fit: cover;" src="${e}" alt="Image"/>`:s.innerHTML="Unsupported media format."}l.addEventListener("lyrics",(function(e){let t=e.data.split("\\n");t.shift();const n=t.join("\n").replace(/\\n/g,"\n").replace(/\$[a-zA-Z]/,"").replaceAll('"',"");o.textContent=n})),l.addEventListener("settings",(function(e){})),l.addEventListener("clear",(function(e){o.textContent="",i.textContent="HWVCI Presenter"})),l.addEventListener("theme",(function(e){var t=JSON.parse(JSON.parse(e.data));t.id;const s=t.font,i=t.font_size,l=t.font_color,r=t.bold,d=t.italic,a=t.strike_through,c=t.top_left_offset,f=t.top_middle_offset,g=t.top_right_offset,p=t.left_upper_offset,h=t.right_upper_offset,u=t.left_middle_offset,m=t.right_middle_offset,y=t.left_lower_offset,_=t.right_lower_offset,v=t.left_bottom_offset,b=t.middle_bottom_offset,w=t.right_bottom_offset,E=(t.text_align,t.justify_content,t.align_items,c+f+g),L=v+b+w,k=p+u+y,x=h+m+_;o.style.marginTop=E+"px",o.style.marginBottom=L+"px",o.style.marginLeft=k+"px",o.style.marginRight=x+"px",o.style.fontFamily=s,o.style.fontSize=i+"px",o.style.color=l,r&&(o.style.fontWeight="bold"),d&&(o.style.fontStyle="italic"),a&&(o.style.textDecoration="line-through"),o.style.textAlign=t.text_align,n.style.justifyContent=t.justify_content,n.style.alignItems=t.align_items})),l.addEventListener("verse",(function(t){var n=JSON.parse(JSON.parse(t.data));e.post("/searchbibleverse",n,(e=>{if(e.ok){var t="",n="";const l=e.data;l.length>1&&(t="\n\n");const r=l.length,d=Object.keys(l[0]).length;for(let e=0;e<d;e++){var s="";for(let n=0;n<r;n++)s+=l[n][Object.keys(l[n])[e]]+t;for(let t=0;t<r;t++){n=Object.keys(l[t])[e]}}o.textContent=s,i.textContent=n}}),(e=>{console.error("Error getting verse",e)}),!0)})),l.addEventListener("media",(function(e){})),l.addEventListener("hidelyrics",(function(e){o.show=!1})),l.addEventListener("blackscreen",(function(e){o.show=!1,s(""),i.show=!1})),l.addEventListener("showdesktop",(function(e){})),l.addEventListener("showlyrics",(function(e){o.show=!0,i.show=!0})),l.addEventListener("removebackground",(function(e){s("")})),l.addEventListener("title",(function(e){i.textContent=e.data.replaceAll('"',"")})),l.addEventListener("changebackground",(function(t){const n=t.data.replaceAll('"',"");if(console.log(t.data),"link"===n)e.get("/getlink",(e=>{e.ok?(console.log(e.link),r(e.link)):console.log("Failed to get link")}),(e=>{console.error("Error get bg link",e)}),!0);else{r(bgData)}}))}));