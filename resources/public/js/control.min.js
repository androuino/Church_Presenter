m2d2.load((t=>{t.dict.set({yes:{en:"YES"},no:{en:"NO"},ok:{en:"OK"},send:{en:"SEND"},cancel:{en:"CANCEL"}})})),m2d2.ready((t=>{var e=null,n=null,o="";const i=t("#header"),a=t(".container"),s=t("#mainControl"),c=t("#bubbles"),l=t("#ulSongs",{template:{li:{tagName:"li",pSongTitle:{tagName:"p",id:"pSongTitle",onload:function(t){tippy(this,{content:"Click to view the lyrics",interactive:!1,placement:"top",animation:"scale"})},onclick:function(e){const n=e.target.dataset.id;this.classList.add("active"),r.text=this.text+" song lyrics",r.style.color="#ffee00",t.get("/getsonglyrics/"+n,(t=>{if(t.ok){const e=t.data.split("$").filter((t=>""!==t.trim()));d.items.clear(),e.forEach((t=>{const e=t.trim().split("\n").map((t=>t.trim())).filter((t=>t.length>0));if(e.length>1){const t=e.slice(1).join(" ");d.items.push({spanLyrics:{text:t}})}})),l.items.forEach((t=>{const e=t.children[0];n===e.dataset.id?this.classList.contains("live")&&(this.style.background="linear-gradient(to right, #ffee00, #3ff53f)"):(e.classList.remove("active"),e.classList.contains("live")?(e.style.color="black",e.style.background="#3ff53f"):(e.style.color="",e.style.background=""))}))}}),!0)}},spanRemove:{tagName:"span",id:"spanRemove",css:"gicon",text:"delete",style:{color:"red"},onload:function(t){tippy(this,{content:"Remove from service",interactive:!1,placement:"top",animation:"scale"})}},spanEdit:{tagName:"span",id:"spanEdit",css:"gicon",text:"edit_document",style:{color:"#3be3c6"},onload:function(t){tippy(this,{content:"Edit on the go",interactive:!1,placement:"top",animation:"scale"})}},spanToLive:{tagName:"span",id:"spanToLive",css:"gicon",text:"play_arrow",style:{color:"#3ff53f"},onload:function(t){tippy(this,{content:"To live",interactive:!1,placement:"top",animation:"scale"})},onclick:function(t){l.items.forEach((t=>{const e=t.children[0];this===t.children[3]?(t.children[3],e.classList.add("live"),e.classList.contains("active")?e.style.background="linear-gradient(to right, #ffee00, #3ff53f)":(e.style.color="black",e.style.background="#3ff53f")):(e.classList.remove("live"),e.classList.contains("active")?e.style.background="#ffee00":(e.style.color="",e.style.background=""))}))}}}},items:[],onclick:function(t){if(t.target.id&&t.target.id.startsWith("spanRemove")){const e=t.target.closest("li");this.removeChild(e)}}}),r=t("#lyricsHeader"),d=t("#lyricsContainer",{template:{li:{tagName:"li",style:{borderBottom:"1px solid white"},spanLyrics:{tagName:"span",id:"spanLyrics"}}},items:[]}),p=t("#tbodySongList",{template:{tr:{tagName:"tr",author:{tagName:"td",css:"author"},songTitle:{tagName:"td",css:"songTitle"},deleteSong:{tagName:"td",css:"deleteSong",span:{tagName:"span",id:"iconDeleteSong",css:"gicon",text:"delete",style:{color:"red"},onload:function(t){tippy(this,{content:"Delete",interactive:!1,placement:"top",animation:"scale"})},onclick:function(e){null!=n?t.confirm("Confirmation to delete this song?",(e=>{e&&t.delete("/deletesong/"+n,(e=>{e.ok?(t.success("Song is deleted."),v()):t.failure("Something went wrong.")}),!0)})):t.alert("Please pick a song on the list.")}}},editSong:{tagName:"td",css:"editSong",span:{tagName:"span",id:"iconEditSong",css:"gicon",text:"edit_document",onload:function(t){tippy(this,{content:"Edit",interactive:!1,placement:"top",animation:"scale"})},onclick:function(e){null!=n?t.get("/editsong/"+n,(t=>{t.ok&&(localStorage.setItem("data",JSON.stringify(t.data)),window.open("http://localhost:5555/create","newWindow","width=800,height=600,toolbar=no,scrollbars=yes,resizable=yes"))})):t.alert("Please pick a song on the list.")}}},toService:{tagName:"td",css:"toService",span:{tagName:"span",id:"iconAddToService",css:"gicon",text:"playlist_add",onload:function(t){tippy(this,{content:"Add to service",interactive:!1,placement:"top",animation:"scale"})},onclick:function(e){null!=n?l.items.push({dataset:{id:n},pSongTitle:{dataset:{id:n},text:o}}):t.alert("Please click a song on the list.")}}},onclick:function(t){n=this.dataset.id,e=n,this.classList.add("active"),p.items.forEach((t=>{if(t.dataset.id!=n)t.classList.remove("active"),t.style.background="";else{t.style.background="#ffee00";const e=t.querySelectorAll("td")[1];e&&(o=e.textContent)}}))}}},items:[]}),g=t(".wrapper",{onload:function(e){t.get("/checksessions",(t=>{t.ok?(a.show=!1,c.show=!1,i.show=!0,s.show=!0,v(),localStorage.setItem("login",!0)):(i.show=!1,s.show=!1,a.show=!0,c.show=!0,localStorage.clear())}),!0)}}),m=t(".form"),h=t("#inputUsername"),f=t("#inputPassword"),u=(t("#loginButton",{onclick:function(e){e.preventDefault();const n=h.value,o=f.value;if(""===n||""===o)t.failure("Username or Password cannot be empty!");else{const e={user:n,pass:o};t.post("/login.path",e,(e=>{e.ok?(m.show=!1,g.classList.add("form-success"),localStorage.setItem("login",!0),location.reload()):t.failure("Error: ",e.message)}),!0)}}}),t("#navNew",{onclick:function(t){window.open("http://localhost:5555/create","newWindow","width=800,height=600,toolbar=no,scrollbars=yes,resizable=yes")}}),t("#navEdit",{onclick:function(n){null===e?t.failure("Please select a song to edit."):t.alert("Editing...")}}),t("#navDelete",{onclick:function(n){null===e?t.failure("Please select a song to delete."):t.alert("Deleting...")}}),t("#navInfo"),t("#navLogout",{onclick:function(e){t.confirm("Are you want to log out?",(e=>{e&&t.get("/logout.path",(t=>{t.ok&&(i.show=!1,s.show=!1,a.show=!0,c.show=!0,localStorage.clear())}))}))}}),t("#inputSearch",{onkeypress:function(e){"Enter"===e.key&&(""===this.value?t.failure("I did not get that!"):t.alert("Searching..."))}}));t("#iconSearch",{onclick:function(e){""===u.value?t.failure("I did not get that!"):t.alert("Searching...")}});function v(){t.get("/getsongs",(t=>{t.ok?(p.items.clear(),t.data.forEach((t=>{p.items.push({dataset:{id:t.id},author:{text:t.author},songTitle:{text:t.songTitle}})}))):console.debug("Error getting all the songs")}))}tippy("#navNew",{content:"Create a new song",interactive:!0,placement:"top",animation:"scale"}),tippy("#navEdit",{content:"Edit an existing song",interactive:!0,placement:"top",animation:"scale"}),tippy("#navDelete",{content:"Delete a song",interactive:!0,placement:"top",animation:"scale"}),tippy("#navInfo",{allowHTML:!0,content:'<p>Application: HWVCI Presenter</p>\n<p>Software version: 1.0</p>\n<p>Developer: Sem Moreno</p>\n<p>Website: <a href="https://josapedmoreno.xyz" target="_blank">josapedmoreno.xyz</a></p>',interactive:!0,trigger:"click",onShow:async t=>{}}),tippy("#navLogout",{content:"Log out",interactive:!0,placement:"top",animation:"scale"}),tippy("#iconSearch",{content:"Search",interactive:!0,placement:"top",animation:"scale"})}));