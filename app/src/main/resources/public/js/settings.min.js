const db=new Dexie("ServiceDB");db.version(1).stores({media:"id, link"}),m2d2.load(e=>{e.dict.set({yes:{en:"YES"},no:{en:"NO"},ok:{en:"OK"},send:{en:"SEND"},cancel:{en:"CANCEL"}})}),m2d2.ready(e=>{let t=!1,i=!1,o=!1,s="center",n="",a="",l=[],r=[],c=[];const f=e("main",{onready:function(t){e.get("/getthemes",t=>{t.ok&&(f.themeList.items.clear(),t.data.forEach(e=>{f.themeList.items.push({dataset:{id:e.id},text:e.themeName}),f.themeList2.items.push({dataset:{id:e.id},text:e.themeName})}),async function(){await db.media.get("videolink").then(e=>{e?m.value=e.link:console.log("media is empty")}),await db.media.get("settheme").then(e=>{e?(console.log("theme from db",e),Array.from(f.themeList.options).forEach(t=>{t.text===e.name&&(f.themeList.value=t.value,f.inputThemeName.value=e.name,S({theme:e.name}))})):console.log("No theme set.")}),await db.media.get("versions").then(t=>{t?(p.items.clear(),t.list.forEach(e=>{p.items.push({text:e})})):(console.log("No Bible versions saved."),e.get("/getbooks",e=>{e.ok&&(p.items.clear(),Object.entries(e.data).forEach(([e,t])=>{r.push(`${e} : ${t}`),p.items.push({text:`${e} : ${t}`})}),A("bibleversions",{list:r}))},e=>{console.error("Error getting books",e)},!0))}),await db.media.get("message").then(e=>{e?(console.log("message is",e),speakerName.value=e.list.speakerName,messageDate.value=e.list.messageDate,presentationSource.value=e.list.presentationSource):console.debug("No saved message.")}),await db.media.get("background").then(e=>{e?f.backgroundColorPicker.value=e.list.color:console.debug("No background saved.")}),e.get("/getversions",e=>{e.ok&&(L.items.clear(),b.items.clear(),w.items.clear(),k.items.clear(),Object.entries(e.data).forEach(([e,t])=>{c.push(`${e} : ${t}`),L.items.push({text:`${e} : ${t}`}),b.items.push({text:`${e} : ${t}`}),w.items.push({text:`${e} : ${t}`}),k.items.push({text:`${e} : ${t}`})}),A("installedversions",{list:c}))})}())},!0)},navFontSettings:{onready:function(e){f.navFontSettings.classList.add("active")},onclick:function(e){f.settingFont.show=!0,f.navFontSettings.classList.add("active"),f.navLocationSettings.classList.remove("active"),f.navThemeList.classList.remove("active"),f.navBibleSettings.classList.remove("active"),f.navMessage.classList.remove("active")}},navLocationSettings:{onclick:function(e){f.settingLocation.show=!0,f.navLocationSettings.classList.add("active"),f.navFontSettings.classList.remove("active"),f.navThemeList.classList.remove("active"),f.navBibleSettings.classList.remove("active"),f.navMessage.classList.remove("active"),f.previewText.text=g.value}},navThemeList:{onclick:function(e){f.settingThemeList.show=!0,f.navThemeList.classList.add("active"),f.navFontSettings.classList.remove("active"),f.navLocationSettings.classList.remove("active"),f.navBibleSettings.classList.remove("active"),f.navMessage.classList.remove("active")}},navBibleSettings:{onclick:function(e){f.settingBible.show=!0,f.navBibleSettings.classList.add("active"),f.navFontSettings.classList.remove("active"),f.navLocationSettings.classList.remove("active"),f.navThemeList.classList.remove("active"),f.navMessage.classList.remove("active")}},navMessage:{onclick:function(e){f.settingMessage.show=!0,f.navMessage.classList.add("active"),f.navBibleSettings.classList.remove("active"),f.navFontSettings.classList.remove("active"),f.navLocationSettings.classList.remove("active"),f.navThemeList.classList.remove("active")}},settingFont:{show:!0,onshow:function(e){f.settingLocation.show=!1,f.settingThemeList.show=!1,f.settingBible.show=!1,f.settingMessage.show=!1}},fontBold:{onclick:function(e){f.fontBold.classList.toggle("active"),fontBold.classList.contains("active")?(g.style.fontWeight="bold",f.previewText.style.fontWeight="bold",t=!0):(g.style.fontWeight="",f.previewText.style.fontWeight="",t=!1)}},fontItalic:{onclick:function(e){f.fontItalic.classList.toggle("active"),f.fontItalic.classList.contains("active")?(g.style.fontStyle="italic",f.previewText.style.fontStyle="italic",i=!0):(g.style.fontStyle="",f.previewText.style.fontStyle="",i=!1)}},fontStrikeThrough:{onclick:function(e){f.fontStrikeThrough.classList.toggle("active"),f.fontStrikeThrough.classList.contains("active")?(g.style.textDecoration="line-through",f.previewText.style.textDecoration="line-through",o=!0):(g.style.textDecoration="",f.previewText.style.textDecoration="",o=!1)}},settingLocation:{show:!1,onshow:function(e){f.settingFont.show=!1,f.settingThemeList.show=!1,f.settingBible.show=!1,f.settingMessage.show=!1;window.location.hostname,window.location.protocol}},topLeftOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,f.topLeftOffset.value=t),f.previewText.style.marginTop=t+"px"}},topMiddleOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,f.topMiddleOffset.value=t),f.previewText.style.marginTop=t+"px"}},topRightOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,f.topRightOffset.value=t),f.previewText.style.marginTop=t+"px"}},leftUpperOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,f.leftUpperOffset.value=t),f.previewText.style.marginLeft=t+"px"}},radioTopLeft:{onclick:function(e){O("flex-start","flex-start"),y(),T(!1,!0,!0,!1,!0,!0,!0,!0,!0,!0,!0,!0)}},radioTopMiddle:{onclick:function(e){O("center","flex-start"),y(),T(!0,!1,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0)}},radioTopRight:{onclick:function(e){O("flex-end","flex-start"),y(),T(!0,!0,!1,!0,!1,!0,!0,!0,!0,!0,!0,!0)}},rightUpperOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,f.rightUpperOffset.value=t),f.previewText.style.marginRight=t+"px"}},leftMiddleOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,f.leftMiddleOffset.value=t),f.previewText.style.marginLeft=t+"px"}},radioLefMiddle:{onclick:function(e){O("flex-start","center"),y(),T(!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0)}},radioCenter:{onready:function(e){O("center","center"),T(!0,!1,!0,!0,!0,!1,!1,!0,!0,!0,!1,!0)},onclick:function(e){O("center","center"),y(),T(!0,!1,!0,!0,!0,!1,!1,!0,!0,!0,!1,!0)}},radioRightMiddle:{onclick:function(e){O("flex-end","center"),y(),T(!0,!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0)}},rightMiddleOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,f.rightMiddleOffset.value=t),f.previewText.style.marginRight=t+"px"}},leftLowerOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,f.leftLowerOffset.value=t),f.previewText.style.marginLeft=t+"px"}},radioLeftBottom:{onclick:function(e){O("flex-start","end"),y(),T(!0,!0,!0,!0,!0,!0,!0,!1,!0,!1,!0,!0)}},radioMiddleBottom:{onclick:function(e){O("center","end"),y(),T(!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!1,!0)}},radioRightBottom:{onclick:function(e){O("flex-end","end"),y(),T(!0,!0,!0,!0,!0,!0,!0,!0,!1,!0,!0,!1)}},rightLowerOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,f.rightLowerOffset.value=t),f.previewText.style.marginRight=t+"px"}},leftBottomOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,f.leftBottomOffset.value=t),f.previewText.style.marginBottom=t+"px"}},middleBottomOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,f.middleBottomOffset.value=t),f.previewText.style.marginBottom=t+"px"}},rightBottomOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,f.rightBottomOffset.value=t),f.previewText.style.marginBottom=t+"px"}},fontAlignCenter:{onready:function(e){f.fontAlignCenter.classList.add("active"),f.previewText.style.textAlign="center"},onclick:function(e){f.previewText.style.textAlign="center",f.fontAlignCenter.classList.add("active"),f.fontAlignHorRight.classList.remove("active"),f.fontAlignJustify.classList.remove("active"),f.fontAlignHorLeft.classList.remove("active"),f.fontAlignRight.classList.remove("active"),f.fontAlignLeft.classList.remove("active"),s="center"}},fontAlignHorRight:{onclick:function(e){f.previewText.style.textAlign="end",f.fontAlignCenter.classList.remove("active"),f.fontAlignHorRight.classList.add("active"),f.fontAlignJustify.classList.remove("active"),f.fontAlignHorLeft.classList.remove("active"),f.fontAlignRight.classList.remove("active"),f.fontAlignLeft.classList.remove("active"),s="end"}},fontAlignJustify:{onclick:function(e){f.previewText.style.textAlign="justify",f.fontAlignCenter.classList.remove("active"),f.fontAlignHorRight.classList.remove("active"),f.fontAlignJustify.classList.add("active"),f.fontAlignHorLeft.classList.remove("active"),f.fontAlignRight.classList.remove("active"),f.fontAlignLeft.classList.remove("active"),s="justify"}},fontAlignHorLeft:{onclick:function(e){f.previewText.style.textAlign="start",f.fontAlignCenter.classList.remove("active"),f.fontAlignHorRight.classList.remove("active"),f.fontAlignJustify.classList.remove("active"),f.fontAlignHorLeft.classList.add("active"),f.fontAlignRight.classList.remove("active"),f.fontAlignLeft.classList.remove("active"),s="start"}},fontAlignRight:{onclick:function(e){f.previewText.style.textAlign="right",f.fontAlignCenter.classList.remove("active"),f.fontAlignHorRight.classList.remove("active"),f.fontAlignJustify.classList.remove("active"),f.fontAlignHorLeft.classList.remove("active"),f.fontAlignRight.classList.add("active"),f.fontAlignLeft.classList.remove("active"),s="right"}},fontAlignLeft:{onclick:function(e){f.previewText.style.textAlign="left",f.fontAlignCenter.classList.remove("active"),f.fontAlignHorRight.classList.remove("active"),f.fontAlignJustify.classList.remove("active"),f.fontAlignHorLeft.classList.remove("active"),f.fontAlignRight.classList.remove("active"),f.fontAlignLeft.classList.add("active"),s="left"}},buttonResetOffset:{onclick:function(e){f.previewText.style.margin="0",y()}},themeList:{template:{optionTheme:{tagName:"option",id:"optionTheme"}},items:[],onchange:function(e){const t={theme:e.target.value};f.inputThemeName.value=e.target.value,S(t)}},buttonSetTheme:{onclick:function(t){const i=f.themeList.value;if(""===i)e.failure("Please choose a theme");else{S({theme:i})}}},buttonOpenFile:{onclick:function(t){const i=[];e.upload(t,{field:"file",upload:"/upload",parallel:!0,maxFiles:30,maxSizeMb:5e3,onSelect:e=>{Array.from(e).forEach(e=>{i[0]={pct:0,file:e.name}})},onUpdate:(e,t,o)=>{i[o]={pct:e,file:t.name}},onResponse:e=>{console.log(e)},onDone:(e,t)=>{e.forEach(e=>{i[e.index]={pct:100,file:e.file.name}}),t&&console.log("all done")},onError:e=>{console.log(e),console.log("on error")}})}},buttonSetPlay:{onclick:function(t){if(""===m.value)e.failure("You did not provide a proper link.");else{A("media",{id:"videolink",link:m.value});const t={link:m.value};e.post("/bglink",t,e=>{e.ok&&console.debug("Setting bg with link success.")},e=>{console.error("Error setting background with provided link.",e)},!0)}}},buttonClearMedia:{onclick:function(t){e.post("/removebackground",e=>{e.ok&&""!=m.value&&(m.value="",db.media.delete("videolink"))})}},previewContainer:{},previewText:{},settingThemeList:{show:!1,onshow:function(e){f.settingFont.show=!1,f.settingLocation.show=!1,f.settingBible.show=!1,f.settingMessage.show=!1}},themeList2:{template:{optionTheme2:{tagName:"option",id:"optionTheme2"}},items:[]},buttonDeleteTheme:{onclick:function(t){e.confirm("Confirm deleting this theme?",t=>{if(t)if("default"===f.themeList2.value)e.failure("Cannot delete default theme");else{const t=f.themeList2.options[f.themeList2.selectedIndex].dataset.id;console.log("selected id is",t),e.post("/deletetheme/"+t,t=>{t.ok&&e.success("Deleting theme success.")},t=>{e.failure("Error deleting a theme.",t)},!0)}})}},buttonDisableService:{onclick:function(t){e.confirm("Confirm to disable projector service?",t=>{t&&("Disable projector"===f.buttonDisableService.text?e.post("/disableservice",t=>{t.ok?(e.success("Success!"),f.buttonDisableService.text="Enable projector"):e.failure("Something's wrong disabling the service.")},e=>{console.error("Error disabling kiosk service.",e)},!0):e.post("/enableservice",t=>{t.ok?(e.success("Success!"),f.buttonDisableService.text="Disable projector"):e.failure("Something's wrong enabling the service.")},e=>{console.error("Error enabling kiosk service.",e)},!0))})}},settingBible:{show:!1,onshow:function(e){f.settingFont.show=!1,f.settingLocation.show=!1,f.settingThemeList.show=!1,f.settingMessage.show=!1,M(f.backgroundColorPicker.value),B(f.opacityRange.value)}},settingMessage:{show:!1,onshow:function(e){f.settingFont.show=!1,f.settingLocation.show=!1,f.settingThemeList.show=!1,f.settingBible.show=!1}},buttonInstall:{onclick:function(t){const i=p.value;""===i?e.failure("I didn't get that. Empty!"):e.confirm("Please confirm Bible version installation.",t=>{if(t){const t={initials:i.split(":")[0].trim()};e.post("/installbook",t,t=>{t.ok&&e.success("New Bible version installed.")},e=>{console.error("Error installing book",e)},!0)}})}},buttonUninstall:{onclick:function(t){const i=L.value;""===i?e.failure("I did not get that. Empty!"):e.confirm("Please confirm on uninstalling version?",t=>{if(t){const t={initials:i.split(":")[0].trim()};e.delete("/uninstallbook",t,t=>{t.ok&&e.success("Uninstall is still in progress. Please refresh after 5 minutes.")},e=>{console.error("Error uninstalling book",e)},!0)}})}},selectVersionsToProject:{onready:function(e){"1"===e.target.value&&(f.version1.enabled=!0,f.version2.enabled=!1,f.version3.enabled=!1)},onchange:function(e){"1"===e.target.value?(f.version1.show=!0,f.version2.show=!1,f.version3.show=!1):"2"===e.target.value?(f.version1.show=!0,f.version2.show=!0,f.version3.show=!1):"3"===e.target.value&&(f.version1.show=!0,f.version2.show=!0,f.version3.show=!0)}},version1:{},version2:{show:!1},version3:{show:!1},buttonSearch:{onclick:function(e){l=[],!0===f.version1.show&&l.push(b.value.split(":")[0].trim()),!0===f.version2.show&&l.push(w.value.split(":")[0].trim()),!0===f.version3.show&&l.push(k.value.split(":")[0].trim()),x(h.value,l)}},verseList:{template:{li:{tagName:"li",style:{border:"1px solid white",whiteSpace:"normal",cursor:"pointer"},preVerse:{tagName:"pre",css:"preVerse",style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},onclick:function(t){document.querySelectorAll("ul.verseList pre").forEach(e=>{e.style.backgroundColor="",e.style.color=""}),t.target.style.backgroundColor="lightgreen",t.target.style.color="black",l=[],!0===f.version1.show&&l.push(b.value.split(":")[0].trim()),!0===f.version2.show&&l.push(w.value.split(":")[0].trim()),!0===f.version3.show&&l.push(k.value.split(":")[0].trim());const i={verse:f.verseList.textContent,versions:l};e.post("/projectverse",i,e=>{e.ok&&console.debug("Success projecting verse")},e=>{console.error("Error projecting verse.",e)},!0)}}}},items:[]},backgroundColorPicker:{},buttonSetVerseBackground:{onclick:function(e){M(e.target.value)}},opacityRange:{onchange:function(e){const t=e.target.value;console.log("current opacity is",t),B(t)}},opacityValue:{},inputThemeName:{},buttonSaveTheme:{onclick:function(o){if(""===f.inputThemeName.value)e.failure("Please type-in a theme's name");else{const o=f.themeList.options[f.themeList.selectedIndex].dataset.id;console.log("the id is",o);const l={id:o,themeName:f.inputThemeName.value.toLowerCase(),font:v.value,fontSize:d.value,fontColor:u.value,bold:t,italic:i,strikeThrough:i,topLeftOffset:f.topLeftOffset.value,topMiddleOffset:f.topMiddleOffset.value,topRightOffset:f.topRightOffset.value,leftUpperOffset:f.leftUpperOffset.value,rightUpperOffset:f.rightUpperOffset.value,leftMiddleOffset:f.leftMiddleOffset.value,rightMiddleOffset:f.rightMiddleOffset.value,leftLowerOffset:f.leftLowerOffset.value,rightLowerOffset:f.rightLowerOffset.value,leftBottomOffset:f.leftBottomOffset.value,middleBottomOffset:f.middleBottomOffset.value,rightBottomOffset:f.rightBottomOffset.value,textAlign:s,justifyContent:n,alignItems:a};e.put("/savetheme",l,t=>{t.ok?(console.log("data is",l),e.success("Theme saved.")):e.failure("An error occurred!")},t=>{e.failure("An error occurred!",t)},!0)}}},speakerName:{},messageDate:{},presentationSource:{},saveMessage:{onclick:function(t){const i=f.presentationSource.value;if(""===i||null==i)e.failure("You did not provided a source. Nothing will show");else{const t={source:i};e.post("/presentation",t,t=>{t.ok&&(e.success("Setup is done."),A("message",{speakerName:speakerName.value,messageDate:messageDate.value,presentationSource:presentationSource.value}))},e=>{console.error(e)},!0)}}},previousSlide:{onclick:function(t){e.post("/previous",e=>{e.ok&&console.log("Slide to previous success.")},e=>{console.log(e)},!0)}},nextSlide:{onclick:function(t){e.post("/next",e=>{e.ok&&console.log("Slide to next success.")},e=>{console.log(e)},!0)}}}),v=e("#selectFont",{template:{font:{tagName:"option",id:"font"}},items:[],onchange:function(e){g.style.fontFamily=v.value}}),d=e("#inputFontSize",{onready:function(e){this.value=24},onchange:function(e){var t=1;this.value<=0?this.value=1:(t=e.target.value,g.style.fontSize=t+"px",f.previewText.style.fontSize=t+"px")}});e("body",{onload:function(t){e.get("/getfonts",e=>{if(e.ok){var t="";v.items.clear(),e.data.forEach(e=>{("Arial"===e||"Ubuntu"===e||"San Francisco"===e)&&(t=e),v.items.push({text:e})}),v.items.length>0&&(v.value=t)}},!0)}});const g=e("#taFontPreview",{onchange:function(e){f.previewText.innerHTML=this.value.replace(/\n/g,"<br>")}}),u=e("#colorPicker",{onchange:function(e){const t=e.target.value;g.style.color=t,f.previewText.style.color=t,g.style.backgroundColor="#ffffff"===t||"white"===t?"black":""}});document.querySelectorAll('input[type="radio"]').forEach(e=>{e.addEventListener("click",e=>{document.querySelectorAll('input[type="radio"]').forEach(t=>{t!==e.target&&(t.checked=!1)})})});const m=e("#mediaLink"),h=e("#inputVerseSearch",{onkeydown:function(e){"Enter"===e.key&&(l=[],!0===f.version1.show&&l.push(b.value.split(":")[0].trim()),!0===f.version2.show&&l.push(w.value.split(":")[0].trim()),!0===f.version3.show&&l.push(k.value.split(":")[0].trim()),x(this.value,l))}}),p=e("#bibleVersions",{template:{option:{tagName:"option",style:{borderBottom:"1px solid black"}}},items:[]}),L=e("#versionsInstalled",{template:{option:{tagName:"option",style:{borderBottom:"1px solid black"}}},items:[]}),b=e("#selectVersion1",{template:{option:{tagName:"option",style:{borderBottom:"1px solid black"}}},items:[]}),w=e("#selectVersion2",{template:{option:{tagName:"option",style:{borderBottom:"1px solid black"}}},items:[]}),k=e("#selectVersion3",{template:{option:{tagName:"option",style:{borderBottom:"1px solid black"}}},items:[]});function x(t,i){const o={verse:t,versions:i};e.post("/searchbibleverse",o,e=>{if(e.ok){const i=e.data;i.length>1&&"\n\n",f.verseList.items.clear();const o=i.length,s=Object.keys(i[0]).length;for(let e=0;e<s;e++){var t="";for(let s=0;s<o;s++){t=Object.keys(i[s])[e]}f.verseList.items.push({preVerse:{textContent:t}})}}},e=>{console.error("Error search verse:",e)},!0)}function y(){f.topLeftOffset.value=0,f.topMiddleOffset.value=0,f.topRightOffset.value=0,f.leftUpperOffset.value=0,f.rightUpperOffset.value=0,f.leftMiddleOffset.value=0,f.rightMiddleOffset.value=0,f.leftLowerOffset.value=0,f.rightLowerOffset.value=0,f.leftBottomOffset.value=0,f.middleBottomOffset.value=0,f.rightBottomOffset.value=0}function T(e,t,i,o,s,n,a,l,r,c,v,d){f.topLeftOffset.disabled=e,f.topMiddleOffset.disabled=t,f.topRightOffset.disabled=i,f.leftUpperOffset.disabled=o,f.rightUpperOffset.disabled=s,f.leftMiddleOffset.disabled=n,f.rightMiddleOffset.disabled=a,f.leftLowerOffset.disabled=l,f.rightLowerOffset.disabled=r,f.leftBottomOffset.disabled=c,f.middleBottomOffset.disabled=v,f.rightBottomOffset.disabled=d}function O(e,t){f.previewContainer.style.justifyContent=e,f.previewContainer.style.alignItems=t,n=e,a=t,console.log("justify content is ",e),console.log("align items is ",t)}function S(s){e.post("/settheme",s,e=>{if(e.ok){console.log("Theme is set to",e.data.theme_name),A("theme",{id:"settheme",theme:e.data.theme_name}),console.log("theme to set is",e.data);const a=e.data.font,l=e.data.font_size,r=e.data.font_color,c=e.data.bold,m=e.data.italic,h=e.data.strike_through,p=e.data.top_left_offset,L=e.data.top_middle_offset,b=e.data.top_right_offset,w=e.data.left_upper_offset,k=e.data.right_upper_offset,x=e.data.left_middle_offset,y=e.data.right_middle_offset,S=e.data.left_lower_offset,B=e.data.right_lower_offset,M=e.data.left_bottom_offset,R=e.data.middle_bottom_offset,C=e.data.right_bottom_offset,N=e.data.text_align,_=e.data.justify_content,E=e.data.align_items;f.topLeftOffset.value=p,f.leftUpperOffset.value=w,f.topMiddleOffset.value=L,f.topRightOffset.value=b,f.rightUpperOffset.value=k,f.leftMiddleOffset.value=x,f.rightMiddleOffset.value=y,f.leftLowerOffset.value=S,f.leftBottomOffset.value=M,f.middleBottomOffset.value=R,f.rightLowerOffset.value=B,f.rightBottomOffset.value=C;const D=p+L+b,F=M+R+C,j=w+x+S,U=k+y+B;switch(f.previewText.style.marginTop=D+"px",f.previewText.style.marginBottom=F+"px",f.previewText.style.marginLeft=j+"px",f.previewText.style.marginRight=U+"px",v.value=a,f.previewText.style.fontFamily=a,d.value=l,f.previewText.style.fontSize=l+"px",u.value=r,f.previewText.style.color=r,g.style.color=r,g.style.fontSize=l+"px",g.style.backgroundColor="#ffffff"===r||"white"===r?"black":"",c?(f.fontBold.classList.toggle("active"),f.previewText.style.fontWeight="bold",g.style.fontWeight="bold",t=!0):(f.fontBold.classList.remove("active"),f.previewText.style.fontWeight="",g.style.fontWeight=""),m?(f.fontItalic.classList.toggle("active"),f.previewText.style.fontStyle="italic",g.style.fontStyle="italic",i=!0):(f.fontItalic.classList.remove("active"),f.previewText.style.fontStyle="",g.style.fontStyle=""),h?(f.fontStrikeThrough.classList.toggle("active"),f.previewText.style.textDecoration="line-through",g.style.textDecoration="line-through",o=!0):(f.fontStrikeThrough.classList.remove("active"),f.previewText.style.textDecoration="",g.style.textDecoration=""),N){case"center":f.fontAlignCenter.classList.add("active"),f.previewText.style.textAlign="center";break;case"end":f.fontAlignHorRight.classList.add("active"),f.previewText.style.textAlign="end";break;case"justify":f.fontAlignJustify.classList.add("active"),f.previewText.style.textAlign="justify";break;case"start":f.fontAlignHorLeft.classList.add("active"),f.previewText.style.textAlign="start";break;case"right":f.fontAlignRight.classList.add("active"),f.previewText.style.textAlign="right";break;case"left":f.fontAlignLeft.classList.add("active"),f.previewText.style.textAlign="left";break;default:f.previewText.style.textAlign="center",console.error("Unknown text alignment")}O(_,E),n=E,"flex-start"===(s=_)&&"flex-start"===n?(f.radioTopLeft.checked=!0,T(!1,!0,!0,!1,!0,!0,!0,!0,!0,!0,!0,!0)):"center"===s&&"flex-start"===n?(f.radioTopMiddle.checked=!0,T(!0,!1,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0)):"flex-end"===s&&"flex-start"===n?(f.radioTopRight.checked=!0,T(!0,!0,!1,!0,!1,!0,!0,!0,!0,!0,!0,!0)):"flex-start"===s&&"center"===n?(f.radioLefMiddle.checked=!0,T(!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0)):"center"===s&&"center"===n?(f.radioCenter.checked=!0,T(!0,!1,!0,!0,!0,!1,!1,!0,!0,!0,!1,!0)):"flex-end"===s&&"center"===n?(f.radioRightMiddle.checked=!0,T(!0,!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0)):"flex-start"===s&&"end"===n?(f.radioLeftBottom.checked=!0,T(!0,!0,!0,!0,!0,!0,!0,!1,!0,!1,!0,!0)):"center"===s&&"end"===n?(f.radioMiddleBottom.checked=!0,T(!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!1,!0)):"flex-end"===s&&"end"===n&&(f.radioRightBottom.checked=!0,T(!0,!0,!0,!0,!0,!0,!0,!0,!1,!0,!0,!1))}var s,n},!0)}async function A(e,t){switch(e){case"media":await db.media.put({id:t.id,link:t.link});break;case"theme":await db.media.put({id:t.id,name:t.theme});break;case"bibleversions":await db.media.put({id:"versions",list:t.list});break;case"installedversions":await db.media.put({id:"installed",list:t.list});break;case"message":case"background":await db.media.put({id:e,list:t})}}function B(t){f.opacityValue.value=`${t}%`,e.post("backgroundopacity/"+t,e=>{e.ok&&console.log("Success on setting the verse background opacity")},e=>{console.error("Error on setting the verse background opacity")},!0)}function M(t){const i={color:t};e.post("/versebackground",i,e=>{e.ok&&A("background",{color:f.backgroundColorPicker.value})},e=>{console.error("Error setting background color:",e)},!0)}});