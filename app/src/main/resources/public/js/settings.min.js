const db=new Dexie("ServiceDB");db.version(1).stores({media:"id, link"}),m2d2.load(e=>{e.dict.set({yes:{en:"YES"},no:{en:"NO"},ok:{en:"OK"},send:{en:"SEND"},cancel:{en:"CANCEL"}})}),m2d2.ready(e=>{let t=!1,i=!1,o=0,s=!1,n="center",a="",l="",r=[],c=[],f=[];const d=e("main",{onready:function(t){e.get("/getthemes",t=>{t.ok&&(d.themeList.items.clear(),t.data.forEach(e=>{d.themeList.items.push({dataset:{id:e.id},text:e.themeName}),d.themeList2.items.push({dataset:{id:e.id},text:e.themeName})}),async function(){await db.media.get("videolink").then(e=>{e?m.value=e.link:console.log("media is empty")}),await db.media.get("settheme").then(e=>{e?(console.log("theme from db",e),Array.from(d.themeList.options).forEach(t=>{t.text===e.name&&(d.themeList.value=t.value,d.inputThemeName.value=e.name,A({theme:e.name}))})):console.log("No theme set.")}),await db.media.get("versions").then(t=>{t?(b.items.clear(),t.list.forEach(e=>{b.items.push({text:e})})):(console.log("No Bible versions saved."),e.get("/getbooks",e=>{e.ok&&(b.items.clear(),Object.entries(e.data).forEach(([e,t])=>{c.push(`${e} : ${t}`),b.items.push({text:`${e} : ${t}`})}),B("bibleversions",{list:c}))},e=>{console.error("Error getting books",e)},!0))}),await db.media.get("message").then(e=>{e?(console.log("message is",e),speakerName.value=e.list.speakerName,messageDate.value=e.list.messageDate,presentationSource.value=e.list.presentationSource):console.debug("No saved message.")}),await db.media.get("background").then(e=>{e?d.backgroundColorPicker.value=e.list.color:console.debug("No background saved.")}),await db.media.get("checked").then(e=>{e?d.iosSwitch.checked=e.enabled:console.debug("No background saved.")}),e.get("/getversions",e=>{e.ok&&(L.items.clear(),k.items.clear(),w.items.clear(),x.items.clear(),Object.entries(e.data).forEach(([e,t])=>{f.push(`${e} : ${t}`),L.items.push({text:`${e} : ${t}`}),k.items.push({text:`${e} : ${t}`}),w.items.push({text:`${e} : ${t}`}),x.items.push({text:`${e} : ${t}`})}),B("installedversions",{list:f}))})}())},!0)},navFontSettings:{onready:function(e){d.navFontSettings.classList.add("active")},onclick:function(e){d.settingFont.show=!0,d.navFontSettings.classList.add("active"),d.navLocationSettings.classList.remove("active"),d.navThemeList.classList.remove("active"),d.navBibleSettings.classList.remove("active"),d.navMessage.classList.remove("active")}},navLocationSettings:{onclick:function(e){d.settingLocation.show=!0,d.navLocationSettings.classList.add("active"),d.navFontSettings.classList.remove("active"),d.navThemeList.classList.remove("active"),d.navBibleSettings.classList.remove("active"),d.navMessage.classList.remove("active"),d.previewText.text=u.value}},navThemeList:{onclick:function(e){d.settingThemeList.show=!0,d.navThemeList.classList.add("active"),d.navFontSettings.classList.remove("active"),d.navLocationSettings.classList.remove("active"),d.navBibleSettings.classList.remove("active"),d.navMessage.classList.remove("active")}},navBibleSettings:{onclick:function(e){d.settingBible.show=!0,d.navBibleSettings.classList.add("active"),d.navFontSettings.classList.remove("active"),d.navLocationSettings.classList.remove("active"),d.navThemeList.classList.remove("active"),d.navMessage.classList.remove("active")}},navMessage:{onclick:function(e){d.settingMessage.show=!0,d.navMessage.classList.add("active"),d.navBibleSettings.classList.remove("active"),d.navFontSettings.classList.remove("active"),d.navLocationSettings.classList.remove("active"),d.navThemeList.classList.remove("active")}},settingFont:{show:!0,onshow:function(e){d.settingLocation.show=!1,d.settingThemeList.show=!1,d.settingBible.show=!1,d.settingMessage.show=!1}},fontBold:{onclick:function(e){d.fontBold.classList.toggle("active"),fontBold.classList.contains("active")?(u.style.fontWeight="bold",d.previewText.style.fontWeight="bold",t=!0):(u.style.fontWeight="",d.previewText.style.fontWeight="",t=!1)}},fontItalic:{onclick:function(e){d.fontItalic.classList.toggle("active"),d.fontItalic.classList.contains("active")?(u.style.fontStyle="italic",d.previewText.style.fontStyle="italic",i=!0):(u.style.fontStyle="",d.previewText.style.fontStyle="",i=!1)}},fontStrikeThrough:{onclick:function(e){d.fontStrikeThrough.classList.toggle("active"),d.fontStrikeThrough.classList.contains("active")?(u.style.textDecoration="line-through",d.previewText.style.textDecoration="line-through",s=!0):(u.style.textDecoration="",d.previewText.style.textDecoration="",s=!1)}},settingLocation:{show:!1,onshow:function(e){d.settingFont.show=!1,d.settingThemeList.show=!1,d.settingBible.show=!1,d.settingMessage.show=!1;window.location.hostname,window.location.protocol}},topLeftOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,d.topLeftOffset.value=t),d.previewText.style.marginTop=t+"px"}},topMiddleOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,d.topMiddleOffset.value=t),d.previewText.style.marginTop=t+"px"}},topRightOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,d.topRightOffset.value=t),d.previewText.style.marginTop=t+"px"}},leftUpperOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,d.leftUpperOffset.value=t),d.previewText.style.marginLeft=t+"px"}},radioTopLeft:{onclick:function(e){S("flex-start","flex-start"),T(),O(!1,!0,!0,!1,!0,!0,!0,!0,!0,!0,!0,!0)}},radioTopMiddle:{onclick:function(e){S("center","flex-start"),T(),O(!0,!1,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0)}},radioTopRight:{onclick:function(e){S("flex-end","flex-start"),T(),O(!0,!0,!1,!0,!1,!0,!0,!0,!0,!0,!0,!0)}},rightUpperOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,d.rightUpperOffset.value=t),d.previewText.style.marginRight=t+"px"}},leftMiddleOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,d.leftMiddleOffset.value=t),d.previewText.style.marginLeft=t+"px"}},radioLefMiddle:{onclick:function(e){S("flex-start","center"),T(),O(!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0)}},radioCenter:{onready:function(e){S("center","center"),O(!0,!1,!0,!0,!0,!1,!1,!0,!0,!0,!1,!0)},onclick:function(e){S("center","center"),T(),O(!0,!1,!0,!0,!0,!1,!1,!0,!0,!0,!1,!0)}},radioRightMiddle:{onclick:function(e){S("flex-end","center"),T(),O(!0,!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0)}},rightMiddleOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,d.rightMiddleOffset.value=t),d.previewText.style.marginRight=t+"px"}},leftLowerOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,d.leftLowerOffset.value=t),d.previewText.style.marginLeft=t+"px"}},radioLeftBottom:{onclick:function(e){S("flex-start","end"),T(),O(!0,!0,!0,!0,!0,!0,!0,!1,!0,!1,!0,!0)}},radioMiddleBottom:{onclick:function(e){S("center","end"),T(),O(!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!1,!0)}},radioRightBottom:{onclick:function(e){S("flex-end","end"),T(),O(!0,!0,!0,!0,!0,!0,!0,!0,!1,!0,!0,!1)}},rightLowerOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,d.rightLowerOffset.value=t),d.previewText.style.marginRight=t+"px"}},leftBottomOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,d.leftBottomOffset.value=t),d.previewText.style.marginBottom=t+"px"}},middleBottomOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,d.middleBottomOffset.value=t),d.previewText.style.marginBottom=t+"px"}},rightBottomOffset:{disabled:!0,onchange:function(e){var t=e.target.value;t<=0&&(t=0,d.rightBottomOffset.value=t),d.previewText.style.marginBottom=t+"px"}},fontAlignCenter:{onready:function(e){d.fontAlignCenter.classList.add("active"),d.previewText.style.textAlign="center"},onclick:function(e){d.previewText.style.textAlign="center",d.fontAlignCenter.classList.add("active"),d.fontAlignHorRight.classList.remove("active"),d.fontAlignJustify.classList.remove("active"),d.fontAlignHorLeft.classList.remove("active"),d.fontAlignRight.classList.remove("active"),d.fontAlignLeft.classList.remove("active"),n="center"}},fontAlignHorRight:{onclick:function(e){d.previewText.style.textAlign="end",d.fontAlignCenter.classList.remove("active"),d.fontAlignHorRight.classList.add("active"),d.fontAlignJustify.classList.remove("active"),d.fontAlignHorLeft.classList.remove("active"),d.fontAlignRight.classList.remove("active"),d.fontAlignLeft.classList.remove("active"),n="end"}},fontAlignJustify:{onclick:function(e){d.previewText.style.textAlign="justify",d.fontAlignCenter.classList.remove("active"),d.fontAlignHorRight.classList.remove("active"),d.fontAlignJustify.classList.add("active"),d.fontAlignHorLeft.classList.remove("active"),d.fontAlignRight.classList.remove("active"),d.fontAlignLeft.classList.remove("active"),n="justify"}},fontAlignHorLeft:{onclick:function(e){d.previewText.style.textAlign="start",d.fontAlignCenter.classList.remove("active"),d.fontAlignHorRight.classList.remove("active"),d.fontAlignJustify.classList.remove("active"),d.fontAlignHorLeft.classList.add("active"),d.fontAlignRight.classList.remove("active"),d.fontAlignLeft.classList.remove("active"),n="start"}},fontAlignRight:{onclick:function(e){d.previewText.style.textAlign="right",d.fontAlignCenter.classList.remove("active"),d.fontAlignHorRight.classList.remove("active"),d.fontAlignJustify.classList.remove("active"),d.fontAlignHorLeft.classList.remove("active"),d.fontAlignRight.classList.add("active"),d.fontAlignLeft.classList.remove("active"),n="right"}},fontAlignLeft:{onclick:function(e){d.previewText.style.textAlign="left",d.fontAlignCenter.classList.remove("active"),d.fontAlignHorRight.classList.remove("active"),d.fontAlignJustify.classList.remove("active"),d.fontAlignHorLeft.classList.remove("active"),d.fontAlignRight.classList.remove("active"),d.fontAlignLeft.classList.add("active"),n="left"}},buttonResetOffset:{onclick:function(e){d.previewText.style.margin="0",T()}},themeList:{template:{optionTheme:{tagName:"option",id:"optionTheme"}},items:[],onchange:function(e){const t={theme:e.target.value};d.inputThemeName.value=e.target.value,A(t)}},buttonSetTheme:{onclick:function(t){const i=d.themeList.value;if(""===i)e.failure("Please choose a theme");else{A({theme:i})}}},buttonOpenFile:{onclick:function(t){const i=[];e.upload(t,{field:"file",upload:"/upload",parallel:!0,maxFiles:30,maxSizeMb:5e3,onSelect:e=>{Array.from(e).forEach(e=>{i[0]={pct:0,file:e.name}})},onUpdate:(e,t,o)=>{i[o]={pct:e,file:t.name}},onResponse:e=>{console.log(e)},onDone:(e,t)=>{e.forEach(e=>{i[e.index]={pct:100,file:e.file.name}}),t&&console.log("all done")},onError:e=>{console.log(e),console.log("on error")}})}},buttonSetPlay:{onclick:function(t){if(""===m.value)e.failure("You did not provide a proper link.");else{B("media",{id:"videolink",link:m.value});const t={link:m.value};e.post("/bglink",t,e=>{e.ok&&console.debug("Setting bg with link success.")},e=>{console.error("Error setting background with provided link.",e)},!0)}}},buttonClearMedia:{onclick:function(t){e.post("/removebackground",e=>{e.ok&&""!=m.value&&(m.value="",db.media.delete("videolink"))})}},previewContainer:{},previewText:{},settingThemeList:{show:!1,onshow:function(e){d.settingFont.show=!1,d.settingLocation.show=!1,d.settingBible.show=!1,d.settingMessage.show=!1}},themeList2:{template:{optionTheme2:{tagName:"option",id:"optionTheme2"}},items:[]},buttonDeleteTheme:{onclick:function(t){e.confirm("Confirm deleting this theme?",t=>{if(t)if("default"===d.themeList2.value)e.failure("Cannot delete default theme");else{const t=d.themeList2.options[d.themeList2.selectedIndex].dataset.id;console.log("selected id is",t),e.post("/deletetheme/"+t,t=>{t.ok&&e.success("Deleting theme success.")},t=>{e.failure("Error deleting a theme.",t)},!0)}})}},buttonDisableService:{onclick:function(t){e.confirm("Confirm to disable projector service?",t=>{t&&("Disable projector"===d.buttonDisableService.text?e.post("/disableservice",t=>{t.ok?(e.success("Success!"),d.buttonDisableService.text="Enable projector"):e.failure("Something's wrong disabling the service.")},e=>{console.error("Error disabling kiosk service.",e)},!0):e.post("/enableservice",t=>{t.ok?(e.success("Success!"),d.buttonDisableService.text="Disable projector"):e.failure("Something's wrong enabling the service.")},e=>{console.error("Error enabling kiosk service.",e)},!0))})}},settingBible:{show:!1,onshow:function(e){d.settingFont.show=!1,d.settingLocation.show=!1,d.settingThemeList.show=!1,d.settingMessage.show=!1,o=d.opacityRange.value,d.iosSwitch.checked?(R(d.backgroundColorPicker.value),M(d.opacityRange.value)):M(0)}},settingMessage:{show:!1,onshow:function(e){d.settingFont.show=!1,d.settingLocation.show=!1,d.settingThemeList.show=!1,d.settingBible.show=!1}},buttonInstall:{onclick:function(t){const i=b.value;""===i?e.failure("I didn't get that. Empty!"):e.confirm("Please confirm Bible version installation.",t=>{if(t){const t={initials:i.split(":")[0].trim()};e.post("/installbook",t,t=>{t.ok&&e.success("New Bible version installed.")},e=>{console.error("Error installing book",e)},!0)}})}},buttonUninstall:{onclick:function(t){const i=L.value;""===i?e.failure("I did not get that. Empty!"):e.confirm("Please confirm on uninstalling version?",t=>{if(t){const t={initials:i.split(":")[0].trim()};e.delete("/uninstallbook",t,t=>{t.ok&&e.success("Uninstall is still in progress. Please refresh after 5 minutes.")},e=>{console.error("Error uninstalling book",e)},!0)}})}},selectVersionsToProject:{onready:function(e){"1"===e.target.value&&(d.version1.enabled=!0,d.version2.enabled=!1,d.version3.enabled=!1)},onchange:function(e){"1"===e.target.value?(d.version1.show=!0,d.version2.show=!1,d.version3.show=!1):"2"===e.target.value?(d.version1.show=!0,d.version2.show=!0,d.version3.show=!1):"3"===e.target.value&&(d.version1.show=!0,d.version2.show=!0,d.version3.show=!0)}},version1:{},version2:{show:!1},version3:{show:!1},buttonSearch:{onclick:function(e){r=[],!0===d.version1.show&&r.push(k.value.split(":")[0].trim()),!0===d.version2.show&&r.push(w.value.split(":")[0].trim()),!0===d.version3.show&&r.push(x.value.split(":")[0].trim()),y(p.value,r)}},verseList:{template:{li:{tagName:"li",style:{border:"1px solid white",whiteSpace:"normal",cursor:"pointer"},preVerse:{tagName:"pre",css:"preVerse",style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},onclick:function(t){document.querySelectorAll("ul.verseList pre").forEach(e=>{e.style.backgroundColor="",e.style.color=""}),t.target.style.backgroundColor="lightgreen",t.target.style.color="black",r=[],!0===d.version1.show&&r.push(k.value.split(":")[0].trim()),!0===d.version2.show&&r.push(w.value.split(":")[0].trim()),!0===d.version3.show&&r.push(x.value.split(":")[0].trim());const i={verse:d.verseList.textContent,versions:r};e.post("/projectverse",i,e=>{e.ok&&console.debug("Success projecting verse")},e=>{console.error("Error projecting verse.",e)},!0)}}}},items:[]},iosSwitch:{onchange:function(e){e.target.checked?(B("checked",!0),M(o),d.opacityRange.disabled=!1):(B("checked",!1),M(0),d.opacityRange.disabled=!0)}},backgroundColorPicker:{},buttonSetVerseBackground:{onclick:function(t){d.iosSwitch.checked?R(d.backgroundColorPicker.value):e.failure("Please enable the background color first.")}},opacityRange:{onchange:function(t){if(d.iosSwitch.checked){const e=t.target.value;M(e),o=e}else t.target.value=o,e.failure("Please enable the background color first.")}},opacityValue:{},inputThemeName:{},buttonSaveTheme:{onclick:function(o){if(""===d.inputThemeName.value)e.failure("Please type-in a theme's name");else{const o=d.themeList.options[d.themeList.selectedIndex].dataset.id;console.log("the id is",o);const s={id:o,themeName:d.inputThemeName.value.toLowerCase(),font:v.value,fontSize:g.value,fontColor:h.value,bold:t,italic:i,strikeThrough:i,topLeftOffset:d.topLeftOffset.value,topMiddleOffset:d.topMiddleOffset.value,topRightOffset:d.topRightOffset.value,leftUpperOffset:d.leftUpperOffset.value,rightUpperOffset:d.rightUpperOffset.value,leftMiddleOffset:d.leftMiddleOffset.value,rightMiddleOffset:d.rightMiddleOffset.value,leftLowerOffset:d.leftLowerOffset.value,rightLowerOffset:d.rightLowerOffset.value,leftBottomOffset:d.leftBottomOffset.value,middleBottomOffset:d.middleBottomOffset.value,rightBottomOffset:d.rightBottomOffset.value,textAlign:n,justifyContent:a,alignItems:l};e.put("/savetheme",s,t=>{t.ok?(console.log("data is",s),e.success("Theme saved.")):e.failure("An error occurred!")},t=>{e.failure("An error occurred!",t)},!0)}}},speakerName:{},messageDate:{},presentationSource:{},saveMessage:{onclick:function(t){const i=d.presentationSource.value;if(""===i||null==i)e.failure("You did not provided a source. Nothing will show");else{const t={source:i};e.post("/presentation",t,t=>{t.ok&&(e.success("Setup is done."),B("message",{speakerName:speakerName.value,messageDate:messageDate.value,presentationSource:presentationSource.value}))},e=>{console.error(e)},!0)}}},previousSlide:{onclick:function(t){e.post("/previous",e=>{e.ok&&console.log("Slide to previous success.")},e=>{console.log(e)},!0)}},nextSlide:{onclick:function(t){e.post("/next",e=>{e.ok&&console.log("Slide to next success.")},e=>{console.log(e)},!0)}}}),v=e("#selectFont",{template:{font:{tagName:"option",id:"font"}},items:[],onchange:function(e){u.style.fontFamily=v.value}}),g=e("#inputFontSize",{onready:function(e){this.value=24},onchange:function(e){var t=1;this.value<=0?this.value=1:(t=e.target.value,u.style.fontSize=t+"px",d.previewText.style.fontSize=t+"px")}});e("body",{onload:function(t){e.get("/getfonts",e=>{if(e.ok){var t="";v.items.clear(),e.data.forEach(e=>{("Arial"===e||"Ubuntu"===e||"San Francisco"===e)&&(t=e),v.items.push({text:e})}),v.items.length>0&&(v.value=t)}},!0)}});const u=e("#taFontPreview",{onchange:function(e){d.previewText.innerHTML=this.value.replace(/\n/g,"<br>")}}),h=e("#colorPicker",{onchange:function(e){const t=e.target.value;u.style.color=t,d.previewText.style.color=t,u.style.backgroundColor="#ffffff"===t||"white"===t?"black":""}});document.querySelectorAll('input[type="radio"]').forEach(e=>{e.addEventListener("click",e=>{document.querySelectorAll('input[type="radio"]').forEach(t=>{t!==e.target&&(t.checked=!1)})})});const m=e("#mediaLink"),p=e("#inputVerseSearch",{onkeydown:function(e){"Enter"===e.key&&(r=[],!0===d.version1.show&&r.push(k.value.split(":")[0].trim()),!0===d.version2.show&&r.push(w.value.split(":")[0].trim()),!0===d.version3.show&&r.push(x.value.split(":")[0].trim()),y(this.value,r))}}),b=e("#bibleVersions",{template:{option:{tagName:"option",style:{borderBottom:"1px solid black"}}},items:[]}),L=e("#versionsInstalled",{template:{option:{tagName:"option",style:{borderBottom:"1px solid black"}}},items:[]}),k=e("#selectVersion1",{template:{option:{tagName:"option",style:{borderBottom:"1px solid black"}}},items:[]}),w=e("#selectVersion2",{template:{option:{tagName:"option",style:{borderBottom:"1px solid black"}}},items:[]}),x=e("#selectVersion3",{template:{option:{tagName:"option",style:{borderBottom:"1px solid black"}}},items:[]});function y(t,i){const o={verse:t,versions:i};e.post("/searchbibleverse",o,e=>{if(e.ok){const i=e.data;i.length>1&&"\n\n",d.verseList.items.clear();const o=i.length,s=Object.keys(i[0]).length;for(let e=0;e<s;e++){var t="";for(let s=0;s<o;s++){t=Object.keys(i[s])[e]}d.verseList.items.push({preVerse:{textContent:t}})}}},e=>{console.error("Error search verse:",e)},!0)}function T(){d.topLeftOffset.value=0,d.topMiddleOffset.value=0,d.topRightOffset.value=0,d.leftUpperOffset.value=0,d.rightUpperOffset.value=0,d.leftMiddleOffset.value=0,d.rightMiddleOffset.value=0,d.leftLowerOffset.value=0,d.rightLowerOffset.value=0,d.leftBottomOffset.value=0,d.middleBottomOffset.value=0,d.rightBottomOffset.value=0}function O(e,t,i,o,s,n,a,l,r,c,f,v){d.topLeftOffset.disabled=e,d.topMiddleOffset.disabled=t,d.topRightOffset.disabled=i,d.leftUpperOffset.disabled=o,d.rightUpperOffset.disabled=s,d.leftMiddleOffset.disabled=n,d.rightMiddleOffset.disabled=a,d.leftLowerOffset.disabled=l,d.rightLowerOffset.disabled=r,d.leftBottomOffset.disabled=c,d.middleBottomOffset.disabled=f,d.rightBottomOffset.disabled=v}function S(e,t){d.previewContainer.style.justifyContent=e,d.previewContainer.style.alignItems=t,a=e,l=t,console.log("justify content is ",e),console.log("align items is ",t)}function A(o){e.post("/settheme",o,e=>{if(e.ok){console.log("Theme is set to",e.data.theme_name),B("theme",{id:"settheme",theme:e.data.theme_name}),console.log("theme to set is",e.data);const a=e.data.font,l=e.data.font_size,r=e.data.font_color,c=e.data.bold,f=e.data.italic,m=e.data.strike_through,p=e.data.top_left_offset,b=e.data.top_middle_offset,L=e.data.top_right_offset,k=e.data.left_upper_offset,w=e.data.right_upper_offset,x=e.data.left_middle_offset,y=e.data.right_middle_offset,T=e.data.left_lower_offset,A=e.data.right_lower_offset,M=e.data.left_bottom_offset,R=e.data.middle_bottom_offset,C=e.data.right_bottom_offset,N=e.data.text_align,_=e.data.justify_content,E=e.data.align_items;d.topLeftOffset.value=p,d.leftUpperOffset.value=k,d.topMiddleOffset.value=b,d.topRightOffset.value=L,d.rightUpperOffset.value=w,d.leftMiddleOffset.value=x,d.rightMiddleOffset.value=y,d.leftLowerOffset.value=T,d.leftBottomOffset.value=M,d.middleBottomOffset.value=R,d.rightLowerOffset.value=A,d.rightBottomOffset.value=C;const D=p+b+L,F=M+R+C,j=k+x+T,U=w+y+A;switch(d.previewText.style.marginTop=D+"px",d.previewText.style.marginBottom=F+"px",d.previewText.style.marginLeft=j+"px",d.previewText.style.marginRight=U+"px",v.value=a,d.previewText.style.fontFamily=a,g.value=l,d.previewText.style.fontSize=l+"px",h.value=r,d.previewText.style.color=r,u.style.color=r,u.style.fontSize=l+"px",u.style.backgroundColor="#ffffff"===r||"white"===r?"black":"",c?(d.fontBold.classList.toggle("active"),d.previewText.style.fontWeight="bold",u.style.fontWeight="bold",t=!0):(d.fontBold.classList.remove("active"),d.previewText.style.fontWeight="",u.style.fontWeight=""),f?(d.fontItalic.classList.toggle("active"),d.previewText.style.fontStyle="italic",u.style.fontStyle="italic",i=!0):(d.fontItalic.classList.remove("active"),d.previewText.style.fontStyle="",u.style.fontStyle=""),m?(d.fontStrikeThrough.classList.toggle("active"),d.previewText.style.textDecoration="line-through",u.style.textDecoration="line-through",s=!0):(d.fontStrikeThrough.classList.remove("active"),d.previewText.style.textDecoration="",u.style.textDecoration=""),N){case"center":d.fontAlignCenter.classList.add("active"),d.previewText.style.textAlign="center";break;case"end":d.fontAlignHorRight.classList.add("active"),d.previewText.style.textAlign="end";break;case"justify":d.fontAlignJustify.classList.add("active"),d.previewText.style.textAlign="justify";break;case"start":d.fontAlignHorLeft.classList.add("active"),d.previewText.style.textAlign="start";break;case"right":d.fontAlignRight.classList.add("active"),d.previewText.style.textAlign="right";break;case"left":d.fontAlignLeft.classList.add("active"),d.previewText.style.textAlign="left";break;default:d.previewText.style.textAlign="center",console.error("Unknown text alignment")}S(_,E),n=E,"flex-start"===(o=_)&&"flex-start"===n?(d.radioTopLeft.checked=!0,O(!1,!0,!0,!1,!0,!0,!0,!0,!0,!0,!0,!0)):"center"===o&&"flex-start"===n?(d.radioTopMiddle.checked=!0,O(!0,!1,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0)):"flex-end"===o&&"flex-start"===n?(d.radioTopRight.checked=!0,O(!0,!0,!1,!0,!1,!0,!0,!0,!0,!0,!0,!0)):"flex-start"===o&&"center"===n?(d.radioLefMiddle.checked=!0,O(!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0)):"center"===o&&"center"===n?(d.radioCenter.checked=!0,O(!0,!1,!0,!0,!0,!1,!1,!0,!0,!0,!1,!0)):"flex-end"===o&&"center"===n?(d.radioRightMiddle.checked=!0,O(!0,!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0)):"flex-start"===o&&"end"===n?(d.radioLeftBottom.checked=!0,O(!0,!0,!0,!0,!0,!0,!0,!1,!0,!1,!0,!0)):"center"===o&&"end"===n?(d.radioMiddleBottom.checked=!0,O(!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!1,!0)):"flex-end"===o&&"end"===n&&(d.radioRightBottom.checked=!0,O(!0,!0,!0,!0,!0,!0,!0,!0,!1,!0,!0,!1))}var o,n},!0)}async function B(e,t){switch(e){case"media":await db.media.put({id:t.id,link:t.link});break;case"theme":await db.media.put({id:t.id,name:t.theme});break;case"bibleversions":await db.media.put({id:"versions",list:t.list});break;case"installedversions":await db.media.put({id:"installed",list:t.list});break;case"message":case"background":await db.media.put({id:e,list:t});break;case"checked":await db.media.put({id:e,enabled:t})}}function M(t){e.post("backgroundopacity/"+t,e=>{e.ok&&(d.opacityValue.value=`${t}%`,d.opacityRange.value=t,console.debug("Success on setting the verse background opacity"))},e=>{console.error("Error on setting the verse background opacity")},!0)}function R(t){const i={color:t};e.post("/versebackground",i,e=>{e.ok&&B("background",{color:d.backgroundColorPicker.value})},e=>{console.error("Error setting background color:",e)},!0)}});